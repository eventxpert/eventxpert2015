<html xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<title>Vendor Registration</title>


</h:head>
<h:body>
	<ui:composition template="/template/common/commonLayout.xhtml">
		<ui:define name="content">
			<div style="background-color: white">
				<div class="lt-flap">
					<img src="images/left.png" alt="" />
				</div>
				<div class="flap-mid">
					<div class="black-shade">&#160;</div>
				</div>
				<div class="rt-flap">
					<img src="images/right.png" alt="" />
				</div>

				<div style="background-color: white" class="mid-content">
					<!--BODY CONTENT STARTS HERE-->
					<div style="background-color: white">
						<h:form id="frm">
							<div style="padding-left: 30%">

								<h:panelGrid>
									<div>


										<p:panel id="loginPanel" header="Vendor Login">
											<p:messages for="Activate Account" />
											<p:messages for="Invalid credentials" />
											<p:messages for="Mismatch credentials" />
											<p:commandLink
												rendered="#{serviceProviderManagedBean.isShowActLink()}"
												id="showDialogButton1V"
												style="color: blue; font-weight: bold; font-variant: small-caps; padding-left: 4px"
												value="Resend Activation Link" onclick="PF('VdlgA').show()" />
											<p:messages for="Password Sent" />
											<p:messages for="Email not registered" />
											<h:panelGrid columns="3" style="padding-top:5px;" >
												<h:outputLabel for="userIdL" value="Email ID: *"
													styleClass="loginFields" />
												<h:inputText maxlength="50" id="userIdL" required="true"
													label="Email ID"
													value="#{serviceProviderManagedBean.loginUser}"
													style="padding: 4px;width:210px;" />
												<p:message for="userIdL" />
												<p:spacer height="10px" width="5px" />
												<p:spacer height="10px" width="5px" />
												<p:spacer height="10px" width="5px" />
												<h:outputLabel for="passwordL" value="Password: *"
													styleClass="loginFields" />
												<h:inputSecret id="passwordL" required="true"
													label="Password"
													value="#{serviceProviderManagedBean.loginPassword}"
													style="padding: 4px;width:210px;" />
												<p:message for="passwordL" />
												<p:spacer height="10px" width="5px" />
												<p:spacer height="10px" width="5px" />
												<p:spacer height="5px" width="5px" />
												<p:spacer></p:spacer>
												<p:commandLink id="showDialogButtonV"
													styleClass="loginForgot" value="Forgot Password"
													onclick="PF('Vdlg').show()" />

											</h:panelGrid>
                 &#160;<br />  &#160;
                 <div style="float: right">
												<p:commandButton id="logbtn" validateClient="true"
													value="SIGN IN" styleClass="loginButton buttonStyle"
													action="#{serviceProviderManagedBean.checkLogin}"
													process="loginPanel" update="loginPanel" />
												<br />
												<h:outputText styleClass="loginText"
													value="Not a member yet? "></h:outputText>
												<p:commandLink styleClass="loginJoin" value="Join"
													immediate="true"
													action="#{serviceProviderManagedBean.register}" />
												<!--    <p:commandButton ajax="false" onclick="PF('buiload').show()" immediate="true" value="Register" action="#{serviceProviderManagedBean.register}" />-->
											</div>
											<br />
											<br />
											<br />
										</p:panel>
										<p:dialog id="Vdlg" header="Forgot Password" widgetVar="Vdlg"
											resizable="false">
											<p:message for="Vemail" />
											<h:panelGrid columns="2" style="margin-bottom:10px">
												<h:outputLabel for="Vemail" value="Email *:" />
												<p:inputText
													validatorMessage="Please enter a valid email id."
													requiredMessage="Please enter a valid email id."
													id="Vemail" required="true"
													value="#{serviceProviderManagedBean.emailaddr}">
													<f:validateRegex
														pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
												</p:inputText>
											</h:panelGrid>
											<p:commandButton validateClient="true" ajax="true"
												partialSubmit="true" value="Submit" process="Vdlg"
												action="#{serviceProviderManagedBean.forgotPswd}"
												update="loginPanel,Vdlg"
												oncomplete="handleLoginRequestFPV(xhr,status,args);" />
										</p:dialog>
										<p:dialog id="VdlgA" header="Resend Activation Link"
											widgetVar="VdlgA" resizable="false">
											<p:message for="VemailA" />
											<h:panelGrid columns="2" style="margin-bottom:10px">
												<h:outputLabel for="VemailA" value="Email *:" />
												<p:inputText
													validatorMessage="Please enter a valid email id."
													requiredMessage="Please enter a valid email id."
													id="VemailA" required="true"
													value="#{serviceProviderManagedBean.emailaddr}">
													<f:validateRegex
														pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
												</p:inputText>
											</h:panelGrid>
											<p:commandLink value="Resend Activation Link"
												validateClient="true" ajax="true" partialSubmit="true"
												process="VdlgA"
												action="#{serviceProviderManagedBean.resendActLink()}"
												update="loginPanel,VdlgA"
												oncomplete="handleLoginRequestRAV(xhr,status,args);" />
										</p:dialog>

										<script>
											function handleLoginRequest(xhr,
													status, args) {
												//alert(args.loggedIn);
												/*   if(args.validationFailed &amp;&amp; args.loggedIn==null) {  
												      //PF('loginDialog').jq.effect("shake", { times:5 }, 100);  
												      PF('dlg').show();
												  }  */
												if (args.validationFailed
														|| !args.loggedIn) {
													//PF('loginDialog').jq.effect("shake", { times:5 }, 100);  
													PF('loginDialog').show();
												} else {
													PF('loginDialog').hide();
													// $('#loginLink').fadeOut();  
												}
											}
											function handleLoginRequestFP(xhr,
													status, args) {
												if (args.validationFailed) {
													//PF('loginDialog').jq.effect("shake", { times:5 }, 100);  
													PF('dlg').show();
												}
											}
											function handleLoginRequestFPV(xhr,
													status, args) {
												if (args.validationFailed) {
													//PF('loginDialog').jq.effect("shake", { times:5 }, 100);  
													PF('Vdlg').show();
												}
											}
											function handleLoginRequestRA(xhr,
													status, args) {
												if (args.validationFailed) {
													//PF('loginDialog').jq.effect("shake", { times:5 }, 100);  
													PF('dlgA').show();
												}
											}
											function handleLoginRequestRAV(xhr,
													status, args) {
												if (args.validationFailed) {
													//PF('loginDialog').jq.effect("shake", { times:5 }, 100);  
													PF('VdlgA').show();
												}
											}
										</script>

									</div>
								</h:panelGrid>


							</div>
						</h:form>
					</div>
				</div>
			</div>
		</ui:define>
	</ui:composition>


</h:body>

</html>


